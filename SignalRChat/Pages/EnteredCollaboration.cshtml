@page
@using System.Data.SqlClient
@using SignalRChat.Pages.DB
@model SignalRChat.Pages.EnteredCollaborationModel
@{
    ViewData["username"] = HttpContext.Session.GetString("username");
    ViewData["collabid"] = HttpContext.Session.GetInt32("collabid");
}
<br />

<h1>@Model.CollaborationName</h1>
@{
    if ((int)ViewData["collabid"] == 1)
    {
        <br />
        <h1>Knowledge Items (Turn into Analysis Eventually)</h1>
        <table class="table table-striped table-bordered">
            <thead class="thead-dark">
                <tr>
                    @* <th>KnowledgeID</th> *@
                    <th>Knowledge Title</th>
                    <th>Knowledge Subject</th>
                    <th>Category</th>
                    <th>Information</th>
                    <th>Knowledge Date</th>
                    <th>Actions</th>
                    @* <th>UserID</th> *@
                </tr>
            </thead>
            <tbody>
                @{
                    SqlDataReader KnowledgeItemReader = DBClass.GetAllKnowledgeItems();

                    while (KnowledgeItemReader.Read())
                    {
                        <tr>
                            @*<td>@KnowledgeItemReader["KnowledgeID"]</td>*@
                            <td>@KnowledgeItemReader["KnowledgeTitle"]</td>
                            <td>@KnowledgeItemReader["KnowledgeSubject"]</td>
                            <td>@KnowledgeItemReader["Category"]</td>
                            <td>@KnowledgeItemReader["Information"]</td>
                            <td>@KnowledgeItemReader["KNDate"]</td>
                            <td>
                                <button type="button" class="btn" style="color: white; width: 100%; background-color: #293A7F;">Edit</button>
                            </td>

                            @*<td>@KnowledgeItemReader["UserID"]</td>*@

                        </tr>
                    }

                    DBClass.CollabFusionDBConnection.Close();
                }

            </tbody>
        </table>

        <a asp-page="/KnowledgeItem" class="btn" style="background-color: #293A7F; color: white;">Create Knowledge Item</a>
        <br />
        <br />
        <a class="btn" style="background-color: #293A7F; color: white; width: 100%;" asp-page="/DataSets">View Excel Data</a>
    }
    else if ((int)ViewData["collabid"] == 2)
    {
        <br />
        <h1>SWOT Analysis</h1>
        <table class="table">
            <thead>
                <tr>
                    <th>File Name</th>
                    <th>Analysis Type</th>
                    <th>Date Uploaded</th>
                    <th>Command</th>
                </tr>
            </thead>
            <tbody>
    
                    <tr>
                        <td>FileName</td>
                        <td>AnalysisType</td>
                        <td>DateAdded.ToShortDateString()</td>
                        <td>
                            <a class="btn btn-primary">View</a>
                        </td>
                    </tr>
                
            </tbody>
        </table>

        // <a asp-page="/UploadFile" class="btn btn-primary">Upload SWOT</a>

        <h1>PEST Analysis</h1>
        <table class="table">
            <thead>
                <tr>
                    <th>File Name</th>
                    <th>Date Uploaded</th>
                    <th>Command</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var document in Model.Doc)
                {
                    <tr>
                        <td>@document.FileName</td>
                        <td>@document.DateAdded.ToShortDateString()</td>
                        <td>
                            <!-- Assuming you want to provide a link to view the document -->
                            <a href="@Url.Page("/ViewDocument", new { id = document.Id })" class="btn btn-primary">View Document</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
        <a class="btn" style="background-color: #293A7F; color: white; width: 100%;" asp-page="/UploadFile">Upload Analysis Document</a>

     

    }
}
<a asp-page="PrintReport" class="btn" style="background-color: #293A7F; color: white; width: 100%;">Print Report</a>


