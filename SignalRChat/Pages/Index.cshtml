@page
@model SignalRChat.Pages.IndexModel
@{
    Layout = "~/Pages/Shared/_LayoutLoggedOut.cshtml";
}

@{
    if (ViewData["LoginMessage"] != null)
    {
        <br />
        if (ViewData["LoginMessage"] == "Successfully Logged Out!")
        {
            <h3 class="text-success">@ViewData["LoginMessage"]</h3>
        }
        if (ViewData["LoginMessage"] == "Username and/or Password Incorrect")
        {
            <h3 class="text-danger">@ViewData["LoginMessage"]</h3>
        }

    }

    if (ViewData["LoginMessage"] == null)
    {
        <br />
    }
}

@{
    if (HttpContext.Session.GetString("username") != null)
    {
        <h3>Already Logged In As: @HttpContext.Session.GetString("username")</h3>
        // Log out here
        <form asp-page="Index" asp-page-handler="LogoutHandler">
            <input type="submit" class="btn btn-danger" value="Logout" />
        </form>
    }

    else if (HttpContext.Session.GetString("LoginError") != null)
    {
        <p class="text-danger">@HttpContext.Session.GetString("LoginError")</p>

                // Let the user try login again.
        <br />
        <br />
        <br />
        <div class="row align-items-center">
            <div class="col-md-12 col-lg-6">
                <img src="./images/InOffice.svg" class="img-fluid" />
            </div>
            <div class="col-md-12 col-lg-6">
                <form asp-page="Index">
                    <label>Username:</label>
                    <input asp-for="Username" class="form-control" placeholder="Enter Username" required />
                    <br />
                    <label>Password:</label>
                    <input asp-for="Password" class="form-control" type="password" placeholder="Enter Password" required />
                    <br />
                    <input type="submit" class="btn" style="color: white; width: 100%; background-color: #293A7F;" value="Login" asp-route-admin="@Model.Admin" />
                </form>
                <br />
                @* Additional code here if needed *@
            </div>
        </div>
    }

    else
    {
                // First time loading the page
        <br />
        <br />
        <br />
        <div class="row align-items-center">
            <div class="col-md-12 col-lg-6">
                <img src="./images/InOffice.svg" class="img-fluid" />
            </div>
            <div class="col-md-12 col-lg-6">
                <form asp-page="Index">
                    <label>Username:</label>
                    <input asp-for="Username" class="form-control" placeholder="Enter Username" required />
                    <br />
                    <label>Password:</label>
                    <input asp-for="Password" class="form-control" type="password" placeholder="Enter Password" required />
                    <br />
                    <input type="submit" class="btn" style="color: white; width: 100%; background-color: #293A7F;" value="Login" asp-route-admin="@Model.Admin" />
                </form>
                <br />
                @* Additional code here if needed *@
            </div>
        </div>
    }
}
